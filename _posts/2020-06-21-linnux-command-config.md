---
layout: post
title:  "Основы конфигурирования Linux"
crawlertitle: "Основы конфигурирования Linux"
summary: "Основы конфигурирования"
date:   2022-05-07 23:09:47 +0700
categories: posts
tags: ['Дата аналитика']
#author: Felipe
---

Загрузчик Linux можно восстановить, даже если он был унич­тожен установщиком Windows. Достаточно просто иметь загрузочный диск, с ко­торого нужно загрузить Linux и выполнить команду:

{% highlight r %}
grub-install /dev/hda
{% endhighlight %}

Чтобы получить права администратора, наберите команду:

{% highlight r %}
su root
{% endhighlight %}

ИЛИ

{% highlight r %}
SU -
{% endhighlight %}

Эта команда позволяет выполнить указанную команду с правами администратора. Например, выполнение следующей команды завершится сообщением об ошибке Permission denied (Недостаточно прав доступа):

{% highlight r %}
cat /etc/shadow
{% endhighlight %}

Но если выполнить команду:

{% highlight r %}
sudo cat /etc/shadow
{% endhighlight %}

то система спросит пароль администратора и после этого выполнит команду. Именно такой режим более предпочтителен, несмотря на то что, если выполнить эту же команду еще раз, система уже не будет спрашивать пароль. Даже если вы
попробуете выполнить другую команду, используя sudo, пароль спрашиваться не будет какое-то время. Отличие команды sudo от команды su в том, что с ее помощью вы не открыли по­стоянную интерактивную сессию, в которой можете отправлять множество команд от имени администратора и видеть результат.

ОС Linux — многопользовательская система и поддерживает несколько терминалов. По умолчанию вы входите в первый терминал. Для того чтобы переключиться на другой, нужно нажать клавишу <Alt> и одну из клавиш <F1>-<F6>. В ответ на это перед вами появится чистый экран с приглашением вве­ сти имя пользователя, которое может быть различным в каждом терминале.

При удаленной работе с сервером можно открывать по три и более терминала и в каждом из них открываю разные папки. В одном терминале это может быть папка конфигурации веб-сервера, в другом — папка журналов ошибок, в третьем — «ко­рень» сайта. Теперь с помощью двух клавиш <Alt>+<Fx> (где х — это цифра от 1 до 6) можно быстро «перепрыгивать» с одной такой папки на другую.

Для выхода из системы служит команда shutdown. После нее указывается, что именно нам нужно: -г (для перезагрузки) или -h (для выключения компьютера). И в конце команды можно задать время, через которое должно начаться выполне­ние команды (в частности, now — сейчас).

Например, для немедленной перезагрузки системы наберите команду:

{% highlight r %}
shutdown -г now
{% endhighlight %}

Для немедленного выключения компьютера следует ввести:

{% highlight r %}
shutdown -h now
{% endhighlight %}

Если вы работаете в текстовом режиме и просто хотите войти под другим именем
пользователя, наберите команду:

{% highlight r %}
exit
{% endhighlight %}

Сердце любой ОС — это ее ядро (Kernel). У Linux ядро расположено в каталоге /boot и имеет имя файла vmlinuz-xxxx, где хххх — номер версии. Версии именно ядра, а не ОС. Если на последней Ubuntu 20.04 выполнить команду:

{% highlight r %}
ls /boot
{% endhighlight %}

то она покажет содержимое этой папки, и среди ее файлов вы должны увидеть файл vmlinuz-5.4.0-21 -generic.

В каталоге /boot может находиться более одного файла ядра, и какой именно загру­жать из них при старте системы, определяется конфигурацией загрузчика.

Современные версии ядра Linux имеют модульную архитектуру. В упомянутом ра­нее файле ядра находится только необходимый функционал. Он является самым важным, потому что если в ядре есть ошибки или какие-то проблемы совместимо­сти, то проблемы будут у всей системы.

Модули ядра Linux позволяют легко добавлять необходимый системе функционал, они имеют расширение kо и расположены в каталоге /lib/modules/хххх, где хххх — также номер версии ядра. Если ядро Linux занимает всего несколько мегабайт, то
модулей сейчас устанавливается более 100 мегабайт. И далеко не все они загружа­ются автоматически при старте системы.

### Установка дополнительных пакетов в Ubuntu

В Ubuntu для этого служит команда apt-get. Она потребует прав администратора, поэтому выполнять ее необходимо из-под sudo.

Сразу же лучше рассмотреть несколько команд, помогающих установить дополни­тельные пакеты. Для этого служит опция install:

{% highlight r %}
sudo apt-get install mc
{% endhighlight %}

После параметра install указывается имя пакета. В нашем случае в качестве при­мера я выбрал программу Midnight Commander (команда mс).

Если результат выполнения команды apt-get заканчивается сообщением об ошибке (пакет не найден), то, скорее всего, локальная база данных в вашей системе не об­новлена. В файле /etc/apt/sources.list содержится список адресов (URLs), по которым
apt-get может найти и установить пакеты программ. Чтобы обновить локальную базу, нужно запустить программу с ключом update:

{% highlight r %}
sudo apt-get update
{% endhighlight %}

Теперь можно попробовать еще раз запустить install тс, и на этот раз все должно пройти успешно — уже на этапе установки будут проверены все зависимости и установлены необходимые библиотеки.

Собрать зависимости можно и отдельной командой:

{% highlight r %}
sudo apt-get build-dep имя_про граммы
{% endhighlight %}

Устанавливать можно сразу по несколько программ, указав их через пробел:

{% highlight r %}
sudo apt-get install имя_программы1 имя_програглмы2
{% endhighlight %}

Если вы не хотите реально устанавливать пакеты, а только посмотреть, что будет устанавливаться, го можно использовать ключ -s (simulate, симулировать установку):

{% highlight r %}
sudo apt-get -s install me
{% endhighlight %}

Для проверки зависимостей нужно выполнить команду:

{% highlight r %}
sudo apt-get check
{% endhighlight %}

Если нужно исправить зависимости:

{% highlight r %}
sudo apt-get -f install
{% endhighlight %}

Для удаления программы или пакета используем:

{% highlight r %}
sudo apt remove имя_программы
{% endhighlight %}

Удаление ранее установленной программы происходит так же просто, как и уста­новка:

{% highlight r %}
sudo apt-get remove имя_программы
{% endhighlight %}

Если какая-то программа была удалена, но остались зависимости, то можно авто­матически удалить все лишнее:

{% highlight r %}
sudo apt-get autoremove
{% endhighlight %}

Для установки обновлений уже установленных программ выполняем следующую команду:

{% highlight r %}
sudo apt-get upgrade
{% endhighlight %}

Чтобы обновить саму ОС, выполняем команду:

{% highlight r %}
sudo apt-get dist-upgrade
{% endhighlight %}

Следующую тройку команд желательно выполнять регулярно для установки об­новлений:

{% highlight r %}
sudo apt-get update
sudo apt-get upgrade
sudo apt-get dist-upgrade
{% endhighlight %}

Все эти команды позволят вам содержать вашу копию релиза Ubuntu и установлен­ных программ в обновленном состоянии, но на новый релиз автоматически вы так не перейдете. Если вышел новый релиз, а не просто обновление существующего, то на него можно перейти командой:

{% highlight r %}
sudo do-release-upgrade
{% endhighlight %}

Чтобы узнать, какие вообще в системе уже установлены пакеты, можно выполнить
следующую команду:

{% highlight r %}
sudo apt list —installed
{% endhighlight %}

Найти описание нужных команд:

{% highlight r %}
curl cheat.sh/pip
{% endhighlight %}