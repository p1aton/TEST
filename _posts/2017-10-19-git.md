---
layout: post
title:  "Git шпаргалка"
crawlertitle: "This is our first post"
summary: "Основные команды git"
date:   2020-06-19 23:09:47 +0700
categories: posts
tags: ['Дата аналитика']
#author: Felipe
---



Команды Git - это важный урок, который в какой-то момент должен усвоить каждый аналитик данных. Чтобы использовать весь потенциал популярной системы управления версиями Git, необходимо знать, как использовать популярные Git команды.

#### Часто используемые команды Git

### Git Setup

{% highlight python %}
git init [directory]   --- Превращает текущий каталог в репозиторий Git
git clone [repo / URL]   --- клонировать / загрузить репозиторий на локальный компьютер
git clone [URL] [folder]   --- клонировать репозиторий из удаленного места в указанную папку | [папка] | на вашем локальном компьютере
{% endhighlight %}

### Git Configuring

{% highlight python %}
git config --global user.name "[your_name]"   --- установить имя автора, которое будет прикреплен ко всем коммитам текущего пользователя
git config --global user.email "[email_address]" --- установить адрес электронной почты, который будет прикреплен ко всем коммитам текущего пользователя
git config --globalcolor.ui auto  --- установить автоматическую командную строку Git раскраска
git config --global alias.[alias_name][git_command]    --- создать ярлык (псевдоним) для Git команд
git config --systemcore.editor[text_editor]    --- установить текстовый редактор по умолчанию для всех пользователей на машине
git config --global --edit   ---открыть глобальную конфигурацию Git файла
{% endhighlight %}

###  Managing Files

{% highlight python %}
git status   --- показывает состояния файлов в рабочей директории и индексе: какие файлы изменены, но не добавлены в индекс; какие ожидают коммита в индексе.
git log    --- используется для просмотра истории коммитов, начиная с самого свежего и уходя к истокам проекта. 
git log --all     --- используется для просмотра истории коммитов из всех веток
git log start-branch..end-branch    --- перечисляет все коммиты, доступные из end-branch , которые недоступны из start-branch
git log start-branch...end-branch    --- перечисляет все коммиты, доступные либо из start-branch , либо из end-branch , но недоступные как из start-branch , так и из end-branch 
git dif   --- увидеть разницу между рабочим каталогом и индексом (каких изменений не было еще совершено )
get diff --cached    --- увидеть разницу между последним коммитом и индексом
get diff HEAD     --- увидеть разницу между последним коммитом и рабочим каталогом
git show [object]     --- используется для просмотра информации о метке или коммите 
{% endhighlight %}

### Git Branches

{% highlight python %}
git branch   --- умеет перечислять ваши ветки, создавать новые, удалять и переименовывать их
git branch -a     --- перечисляет все удаленные ветки
git branch [branch]     --- умеет составлять список ваших веток, создавать новые, удалять и переименовывать их
git checkout [branch]   --- переключиться на другую ветку (либо существующий или создать новую ветку под указанным именем]
git branch -d [branch]    --- удалить локальную ветку
git branch -m [new_branch_name]   --- переименовывает ветку, в которой вы находитесь в настоящее время
git merge [branch]    --- объединият указанную ветку с текущей веткой
{% endhighlight %}

### Rewriting History

{% highlight python %}
git commit --amend     --- изменяет предыдущий коммит, вместо того чтобы создавать новый
git rebase [base]     --- переносит текущую ветку поверх <base>. <base> - может быть хешем коммита, именем ветки, тегом или относительной ссылкой на HEAD.
git reflog    --- перечисляет изменения, внесенные в HEAD локального репозитория
{% endhighlight %}

### Remote Repositories

{% highlight python %}
git remote add [name] [URL]    --- создает новое соединение с удаленным репозиторием и дайет ему имя, чтобы служить ярлыком для URL
git fetch [remote_repo] [branch]    --- получает ветку с удаленного хранилища
git pull [remote_repo]     --- получить указанный репозиторий и объединить его с локальной копией
git push [remote_repo] [branch]    --- отправляет ветку в удаленный репозиторий со всеми ее коммитами и объектами
{% endhighlight %}

### Undoing Changes

{% highlight python %}
git revert [file/directory]    --- отменяет все изменения в указанном файле / каталоге, создает новый коммит и применяет его к текущей ветке
git reset [file]    --- отключает указанный файл без перезаписи и изменений
git reset [commit]   --- отменить все изменения, которые произошли после конкретного коммита
git clean -n    --- посмотреть, какие файлы следует удалить из текущего каталога
git clean -f    --- удалит ненужные файлы в каталоге
{% endhighlight %}

### Making Changes

{% highlight python %}
git add [file/directory]     --- добавляет содержимое рабочей директории в индекс (staging area) для последующего коммита
git add .    --- работает только в текущей директории
git commit -m "[descriptive_message]"   --- записать изменения с заданным сообщением
{% endhighlight %}

### Работа с локальным репозиторием с помощью git

#### Установка Git

В разных операционных системах Git устанавливают по-разному:

* в Linux — через командную строку. Перейдите по ссылке https://git-
scm.com/download/linux, найдите команду для вашей версии Linux.
* в Windows и macOS скачайте установочный файл с официального сайта https://git-
scm.com/.

#### Стартовая настройка Git

Откройте терминал для macOS или Git Bash для Windows. Чтобы убедиться, что Git
установлен, запросите информацию о программе:

{% highlight python %}
git --version
{% endhighlight %}

Вы увидите сообщение:

{% highlight python %}
git version 2.29.2.windows.2
{% endhighlight %}

Следующим шагом укажите информацию о себе. Чтобы другие разработчики
понимали, кто изменяет код, нужно сообщить программе Git ваши данные: имя
пользователя и электронный адрес. Их мы пропишем в файле .gitconfig — в нём
хранятся глобальные настройки программы. Для этого в командной строке запустите
утилиту git config с опцией --global (англ. global, «глобальные»). Свои данные укажите
как значения свойств user.name и user.email :

{% highlight python %}
git config --global user.name "Analitik Datascientistov"
# вводите своё имя или ник латиницей и в кавычках
{% endhighlight %}

{% highlight python %}
git config --global user.email analitikds@yandex.com
# здесь нужно ввести свой реальный e-mail
{% endhighlight %}

Проверьте, что получилось: выполните команду git config с опцией --list (англ. list,
«список»):

{% highlight python %}
git config --list
# вывели в окно командной строки список всех свойств конфига
{% endhighlight %}

В открывшемся перечне Windows) или новом файле (macOS среди прочих свойств вы
увидите свои данные:

{% highlight python %}
user.name=Analitik
user.email=analitik@test.com
{% endhighlight %}

Выход из режима просмотра файла осуществляется нажатием клавиши [Q] (сработает
при включённой латинской раскладке).

#### Создание, отображение, добавление

Организуем для нашего проекта рабочую директорию — папку с именем new-
analytics-projects.
Лишь папки недостаточно, нужно ещё сообщить программе Git, что файлы в этой
папке нужно отслеживать. Этот процесс называется инициализацией и запускается
командой git init.
Инициализируем Git вызовом git init (от англ. initialization, «инициализация»).

#### Сначала создаём папку для проекта.

{% highlight python %}
mkdir new-analytics-projects
# создали папку new-analytics-projects в текущей директории
cd new-analytics-projects
# перешли в созданную папку new-analytics-projects
git init
# инициализировали git в папке new-analytics-projects
{% endhighlight %}

Команда git init создаёт в папке с проектом скрытую поддиректорию .git, где хранится
вся информация об изменении файлов.

#### Создание локального репозитория Git

Версионный контроль в Git предполагает, что любой файл репозитория находится в
одном из четырёх состояний:

1. неотслеживаемый (англ. untracked),
2. добавленный в индекс, индексируемый (англ. staged, «выдвинутый на плацдарм»),
3. изменённый (англ. modified),
4. боевой, на жаргоне разработчиков «коммит» или «закоммиченный» (англ.
committed, «брошенный в бой»).

Логика работы такая: как только в инициализированной папке появляется файл, он
попадает в состояние неотслеживаемый. Что бы вы ни делали с этим файлом, Git
будет игнорировать изменения.

Чтобы Git обратил внимание на этот файл и стал учитывать вносимые в него
изменения, файл нужно добавить в индекс. После этого файл перейдёт в состояние
«добавленный», а если после этого внести в него изменения — в состояние
«изменённый».

Когда мы закончим изменение файла, нам нужно его «сохранить» — сообщить
программе Git, что актуальное состояние файла нужно запомнить. Позже это позволит
нам вернуться к этой версии, если что-то пойдёт не так.

Такое сохранение называют коммитом:

<center>
<img src="{{ '/assets/images/git_status.png' | prepend: site.baseurl }}" alt=""> 
</center>

Команды Git, которые нам предстоит изучить, выполняют одну из трёх задач:

* изменяют состояние файла;
* отображают информацию о файле;
* показывают разницу между его версиями.

git add (англ. add, «добавить») — команда для добавления файлов в индекс Staging
Area (англ. «плацдарм», «место временного сосредоточения», «временное
хранилище»). После этой команды нужно указать имя файла, судьбу которого
поручено отслеживать: git add название_файла .

Можно добавить все файлы сразу прибегнув к опции -- all (англ. all, «все»). Файлы из
вложенных каталогов так же добавятся в индекс:

{% highlight python %}
git add --all
{% endhighlight %}

Опцию -- all можно заменить точкой: git add .

{% highlight python %}
git add project1.ipynb
# добавили файл project1.ipynb
git add --all
# добавили все файлы
git add .
# добавили все файлы
{% endhighlight %}

Чтобы сохранить состояние файлов нужно сделать коммит — зафиксировать все
сделанные изменения в «боевой версии» и оставить комментарий. Делают это
специальной командой git commit (англ. commit, «бросить в бой») c ключом -m (от
англ. message, «послание»). После этого ключа требуется комментарий в кавычках:

{% highlight python %}
git commit -m "My first commit"
# сделали первый коммит
# текст комментария - "My first commit", в переводе "мой первый коммит"
# комментарии лучше писать латинским алфавитом, чтобы они корректно отображались в командной строке
{% endhighlight %}

Пишите комментарии так, чтобы потом вам было легко разобраться, какие изменения
были сделаны в каждом коммите.

Самое время опубликовать проект на гитхабе! Скопируйте репозиторий из облака на
локальное хранилище командой git clone (англ. clone, «клонировать»):

{% highlight python %}
git clone [адрес, откуда копируем] [путь до папки, куда копируем]
{% endhighlight %}

Откройте командную строку и клонируйте репозиторий в память своего компьютера.
Не забывайте: если вы уже находитесь в той папке, куда нужно клонировать, путь
указывать не надо. Достаточно указать ссылку на клонируемый проект:

{% highlight python %}
git clone https://github.com/<user>/<repository>.git
# скопировали репозиторий с сайта github в текущую директорию
{% endhighlight %}

После клонирования на компьютере появится папка с названием репозитория.
Зайдём в неё из командной строки:

{% highlight python %}
cd <repository>.git
# перешли в папку с проектом
{% endhighlight %}

Скопируйте все файлы c проектами в этот репозиторий. Добавьте все файлы:

{% highlight python %}
git add --all
# добавили всё
{% endhighlight %}

Сделайте коммит:

{% highlight python %}
git commit -m "First commit"
# сделали коммит с комментарием First commit
{% endhighlight %}

Вот и настал момент загрузки вашего сайта на удалённый репозиторий. Для этого есть
команда git push (англ. push, в значении «от себя»). Так как мы скопировали готовый
репозиторий с сервера, для первой публикации изменений будем вызовем команду git
push с ключом -u и двумя аргументами:
* первый аргумент — имя сервера, с которого вы скопировали репозиторий: origin
(англ. «источник»);
* второй аргумент — имя ветки: master;
* ключ -u связывает локальную ветку с веткой удалённого репозитория. Этот ключ
нужен, только если вы публикуете новые ветки.

Опубликуем новую ветку:

{% highlight python %}
git push -u origin master
{% endhighlight %}

Если всё прошло хорошо, вы увидите добавленные файлы в своём репозитории на
сайте GitHub.
Если вы храните свои репозитории на разных компьютерах, то когда вы публикуете
сделанные на одном компьютере изменения, на другом — их нужно получить
командой git pull.
Команда git pull (англ. pull, в значении «на себя») заносит все созданные коммиты в
вашу рабочую ветку. Выполнение этой команды может привести к конфликтам, так
как все изменения при получении сразу сливаются с вашей веткой.

{% highlight python %}
git pull
{% endhighlight %}

Поздравляю вы загрузили свой первый проект на GitHub.