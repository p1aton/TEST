---
layout: post
title:  "Мануал по работе с GIT"
crawlertitle: "This is our first post"
summary: "Основные команды git"
date:   2021-01-26 23:09:47 +0700
categories: posts
tags: ['Дата аналитика']
#author: Felipe
---



В этом посте подготовил информацию, как использовать Git на боевом проекте начиная с запуска Git на рабочей машине и настройки локального репозитория до размещение изменений на удаленом репозитории с отправкой pull request в основной репозиторий. 

### Git мануал

#### Установка Git

 *   Linux https://git-scm.com/download/linux
 *   Windows https://git-scm.com/download/win
 *   MacOS https://git-scm.com/download/mac

При установке выбираем «Использовать Git из командной строки» (Use Git from... the Command Prompt).

#### Стартовые настройки

Откройте терминал и выполните команду:

{% highlight python %}
git --version
{% endhighlight %}

В ответе увидите сообщение:

{% highlight python %}
git version 2.25.1 #версия вашего GIT
{% endhighlight %}

Основные данные о вашем профиле хранятся в файле .gitconfig, чтобы другие разработчики понимали с кем они работают внесети туда данные. 

Для этого выполните следующие команды: 

{% highlight python %}
git config --global user.name "YouNikName" --напишите в кавычки свой ник или имя
git config --global user.email youmail@youmail.com --напишите свой e-mail
{% endhighlight %}

Проверяем,  что получилось:
{% highlight python %}
git config --list
{% endhighlight %}
В вывводе увидите свои данные внесенные в конфиг GIT.

#### Создание нового репозитория

GIT хранит свои файлы и историю прямо в папке проекта. Чтобы  создать новый репозиторий, нам нужно создать директорию с проектом зайти в папку  нашего проекта и выполнить команду init. В этой  конкретной папке GIT создаст скрытую директорию .git, где будет храниться  история репозитория и настройки.

Выполните следующие команды:

{% highlight python %}
mkdir Desktop/git_project/
cd Desktop/git_project/
git init
{% endhighlight %}

Командная строка вернет примерно такой результат:
{% highlight python %}
Initialized empty Git repository in /home/user/Desktop/git_project/.git/
{% endhighlight %}

Ваши файлы в GIT  могут находится в одном из четырёх состояний:

 1.   неотслеживаемый ,
 2.   добавленный в индекс, 
 3.   изменённый,
 4.   закоммиченный.

 Изначально файлы находящиеся в вашем репозитории находятся в состоянии "неотслеживаемый", чтобы GIT стал учитывать изменения в файле его нужно добавить в индекс и он меняет состояние на "добавленный в индекс", если на этом этапе внести в него изменения он поменяет статус на "изменённый", для того чтобы сохранить изменения и была возможность к ним вернуться мы сохранем их коммитом и он переходит в состояние "закоммиченный".

#### Использование ключей SSH с GitHub

Откройте терминал и выполните команду:
{% highlight python %}
$ ssh-keygen -t rsa
{% endhighlight %}

На консоль будет выведен следующий диалог:
{% highlight python %}
Enter file in which to save the key (/home/user/.ssh/id_rsa):
{% endhighlight %}

Нажмите на клавишу Enter.  Далее система предложит ввести кодовую фразу для дополнительной защиты SSH-подключения:
{% highlight python %}
Enter passphrase (empty for no passphrase):
{% endhighlight %}

Этот шаг можно пропустить. При ответе на этот и следующий вопрос просто нажмите клавишу Enter.

После этого ключ будет создан, а на консоль будет выведено следующее сообщение:
{% highlight python %}
Your identification has been saved in /home/user/.ssh/id_rsa.
Your public key has been saved in /home/user/.ssh/id_rsa.pub.
The key fingerprint is:
476:b2:a8:7f:08:b4:c0:af:81:25:7e:21:48:01:0e:98 user@localhost

The key's randomart image is:

+--[ RSA 2048]----+

|+.o.             |

|ooE              |

|oo               |

|o.+..            |

|.+.+..  S .      |

|....+  o +       |

|  .o ....        |

|  .  .. .        |

|    ....         |

+-----------------+
{% endhighlight %}

Далее выполните в терминале команду:
{% highlight python %}
$ cat ~/.ssh/id_rsa.pub
{% endhighlight %}

На консоль будет выведен ключ. Скопируйте его и вставьте в соответствующее поле GitHub

#### Создание нового удаленного репозитория

После создания локального репозитория нам нужно создать удаленный репозиторий на GitHub с которым мы будем работать. Есть два способа, как вы можете создать репозиторий в своем аккаунте на GitHub:

 1.   Вы заходите в свой аккаунт и создаете новый репозиторий, довольно простая процедура, которую не вижу смысла описывать. 
 2.   Создание форка основного репозитория с которым вы собираетесь работать и последующаю отправка туда pull request (функция Github, позволяющая вносить изменения в ветку из других веток или репозиториев). В данном мануале будем использовать именно этот вариант.

 Выполните следующие шаги: 

1. Зайдите на основной репозиторий https://github.com/freecode-academy/freecode.academy
2. В правой верхней части страницы есть три кнопки Watch, Star, Fork. Вам нужно нажать кнопку Fork в вашем аккаунте появится новый репозиторий. 
3. Склонируйте ваш репозиторий в локальный репозиторий, для этого выполните следующие шаги в командной строке:
{% highlight python %}
cd Desktop/git_project/ -- перейдите в папку вашего проекта
git clone git@github.com:YouName/YouFork.git -- в команду git clone вставьте ссылку вашего форка (ссылка находиться в вашем репозитории зеленая кнопка Code)
{% endhighlight %}

#### Определение состояния

Полезна команда git status позваляет вам определить в каком состоянии вы находитесь в любой непонятной ситуации вызывайте git status:

В терминале выполните следующую команду:
{% highlight python %}
git status
{% endhighlight %}

Если нет изменений вывод будет примерно такой:

{% highlight python %}
На ветке Master
Ваша ветка обновлена в соответствии с «origin/Master».
нечего коммитить, нет изменений в рабочем каталоге
{% endhighlight %}

Если есть изменения вывод будет примерно такой: 

{% highlight python %}
На ветке master
Ваша ветка обновлена в соответствии с «origin/master».
Неотслеживаемые файлы:
  (используйте «git add <файл>…», чтобы добавить в то, что будет включено в коммит)
	_posts/2020-06-22-git-manual.md
ничего не добавлено в коммит, но есть неотслеживаемые файлы (используйте «git add», чтобы отслеживать их)
{% endhighlight %}


#### Обычная отправка коммитов в ваш удаленный репозиторий

Если вы изменили в файлы в проекте и хотите отправить сохраненные изменения в свой репозиторий на GitHub.

Вам нужно выполнить следующие команды: 

{% highlight python %}
git add . # добавляем в индекс все измененные файлы
git commit -m "My first commit" # отправляем коммит и пишем название вашего коммита
git push # отправляем изменения в удаленный репозиторий
{% endhighlight %}

#### Продвинутая отправка коммитов в удаленный репозиторий

Название "продвинутый" будет описывать алгоритм отправки измененний в основной репозиторий из которого вы делали fork для того чтобы ваши изменения могли внести в основной репозиторий. Здесь мы используем имменно такой алгоритм отправки коммитов перед началом работой с задачей вам нужно ознокомиться с этим алгоритмом и предерживаться его. 

1. Перед началом выполнения задачи вам нужно переключиться в ветку мастер и сделать git pull с основного проекта для того чтобы обновить коммиты, которые появились на основном проекте.

Выполните следующие команды:

{% highlight python %}
git branch
{% endhighlight %}

В моем случае вывод такой:
{% highlight python %}
* LineBreak
  master
{% endhighlight %}
Я нахожусь в ветке LineBreak

Чтобы переключиться на master выполняем следующую команду:

{% highlight python %}
git checkout master
{% endhighlight %}

В моем случае вывод такой:

{% highlight python %}
Переключено на ветку «master»
Ваша ветка обновлена в соответствии с «origin/master».
{% endhighlight %}

Далее выполняем следующую команду: 

{% highlight python %}
git pull git@github.com:freecode-academy/freecode.academy.git master -- загружаем все изменения с основного проекта
{% endhighlight %}

2. Создаем новую ветку.

Выполните следующую команду: 

{% highlight python %}
git checkout -b YouBranch -- создаем новую ветку и заходим в нее (YouBranch  меняем на ваше название)
{% endhighlight %}

3. Добовляем измения в индекс, коммитим и делаем пуш в гитхаб.

{% highlight python %}
git add . # добавляем в индекс все измененные файлы
git commit -m "My first commit" # отправляем коммит и пишем название вашего коммита
git push origin branchname # отправляем изменения в удаленный репозиторий
{% endhighlight %}

4. Отправляем pull request (функция Github, позволяющая вносить изменения в ветку из других веток или репозиториев). 

Чтобы создать Pull Request, зайдём на страницу вашего форка в GitHub. Справа внизу после названия вашего форка, есть вкладка Pull request заходите в нее, если у вас есть коммит для отпрваки вы увидите окно с заголовком и комментарием там будет стоять название вашего коммита  с правой стороны будет зеленая кнопка «New pull request» нажимаете эту кнопку ваш pull request будет отправлен. Проверить отправку можно в основном проекте заходите в основной проект во вкладке Pull request  будут отображаться цифры с отправленными pull request, если вы туда зайдете сможете увидеть свой pull request.

5. После принятия pull request локально удаляете эту ветку и забываете про нее.

Для этого выполните следующую команду: 

{% highlight python %}
git branch -D YouBranch -- YouBranch  меняем на ваше название
{% endhighlight %}